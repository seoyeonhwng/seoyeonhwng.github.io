---
layout:     post
title:      "파이썬 magic method"
date:       2021-01-18 12:00:00
author:     "yellie"
header-style: text
tags:
    - Python
    - 매직 메소드
---

__new__와 __init__의 차이점을 찾아보다가 더블 언더스코어로 시작하는 메소드를 매직 메소드라고 부르는 것을 알게 되었다. 
또한 __init__외에도 매직 메소드가 엄청 많이 존재하는 것을 보고, 매직 메소드에 대해서 공부하면 파이썬 실력 향상에 도움이 될 것 같아 정리하게 되었다.

## magic method란?
클래스 안에 정의된 함수를 메소드라고 하고, 그 중에서 **더블 언더스코어로 시작하고 끝나는 메소드**들을 매직 메소드라고 한다.

## 언제 사용하면 좋을까?
매직 메소드의 가장 큰 장점은 **내가 정의한 클래스를 파이썬 내부에 정의된 클래스처럼 사용할 수 있다**는 것이다.

파이썬에서 1 + 2 같은 연산을 할 수 있는 이유는 파이썬 내부에 정의된 int 클래스에 `__add__` 라는 매직 메소드가 정의되어있기 때문이다. 
그렇기 때문에 내가 정의한 클래스에 매직 메소드를 정의한다면 파이썬 내부에 정의된 클래스처럼 동작하게끔 할 수 있다.

## 클래스 선언만 한다면?
만약 클래스를 선언하고 아무것도 정의하지 않았을때 해당 클래스는 어떤 속성과 메소드를 가지고 있을까?

![image](https://user-images.githubusercontent.com/49056225/120762351-20e78a00-c551-11eb-87aa-22952689868a.png)

확인해보니 많은 매직 메소드가 이미 구현되어 있음을 알 수 있다. 해당 매직 메소드는 어떤 기능을 하는지 하나씩 살펴보자!

### Construction and Initialization
- `__new__(cls, [...)` : 새로운 인스턴스를 만들때 가장 먼저 호출된다. 클래스를 받아 실제로 인스턴스를 생성하고 __init__에게 인자들을 넘겨준다.

- `__init__(self, [..)` : 클래스의 initializer로, 인스턴스가 생성되고 나서 호출된다. 인스턴스를 생성할때 넘겨준 인자들은 __init__이 받게 된다.

- `__del__(self)` : 객체가 없어질 때(garbage collected) 호출된다.

### Controlling Attribute Access
- `__getattribute__(self, name)` : `self.name`으로 객체의 속성을 참조할 때 호출된다.

- `__getattr__(self, name)` : 객체에 존재하지 않는 속성을 `self.name` 으로 참조할 때 호출된다.

- `__setattr__(self, name, value)` : 속성의 존재 여부와 상관없이 `self.name = val` 으로 객체의 속성에 값을 할당할 때 호출된다.

- `_delattr__(self, name)` : 속성의 존재 여부와 상관없이 `del self.name` 으로 객체의 속성을 삭제할때 호출된다.
